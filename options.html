<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gemini Dictate - Settings</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>üé§ Gemini Dictate</h1>
      <p class="subtitle">Speech-to-text transcription powered by Gemini AI</p>
    </header>

    <main>
      <section class="card">
        <h2>API Configuration</h2>

        <div class="form-group">
          <label for="apiKey">Gemini API Key</label>
          <input type="password" id="apiKey" placeholder="Enter your Gemini API key" autocomplete="off">
          <p class="help-text">
            Don't have an API key?
            <a href="https://makersuite.google.com/app/apikey" target="_blank">Get one here</a>
          </p>
        </div>

        <div class="button-group">
          <button id="saveBtn" class="btn btn-primary">Save API Key</button>
          <button id="testBtn" class="btn btn-secondary">Test Connection</button>
        </div>

        <div id="status" class="status hidden"></div>
      </section>

      <section class="card">
        <h2>How to Use</h2>
        <ol class="instructions">
          <li>Click on any text input field on a webpage</li>
          <li>Press <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd> (or <kbd>Cmd</kbd> + <kbd>Shift</kbd> +
            <kbd>S</kbd> on Mac)
          </li>
          <li>Start speaking - your words will be transcribed in real-time</li>
          <li>Click away or switch tabs to stop dictation</li>
        </ol>

        <p class="help-text">
          You can customize the keyboard shortcut in
          <a href="chrome://extensions/shortcuts" target="_blank">Chrome's extension shortcuts</a>
        </p>
      </section>

      <section class="card">
        <h2>Transcription Engine</h2>
        <div class="form-group">
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="engine" value="chrome" checked>
              <div class="radio-content">
                <strong>Chrome Web Speech API (Default)</strong>
                <p class="help-text">Standard browser-based transcription. Fast and free, but less accurate.</p>
              </div>
            </label>

            <label class="radio-option" id="geminiOption">
              <input type="radio" name="engine" value="gemini" id="engineGemini">
              <div class="radio-content">
                <strong>Gemini AI Transcription</strong>
                <p class="help-text">Advanced AI-powered transcription with automatic cleanup of stutters and
                  hesitations. Requires API key.</p>
              </div>
            </label>

            <label class="radio-option" id="chirpOption">
              <input type="radio" name="engine" value="chirp" id="engineChirp">
              <div class="radio-content">
                <strong>Google Chirp 3 (Cloud Speech-to-Text V2)</strong>
                <p class="help-text">High-accuracy multilingual model. Requires Google Cloud Project & Recognizer.</p>
              </div>
            </label>
          </div>

          <p class="help-text" id="geminiDisabledNote" style="display: none; color: #f44336; margin-top: 10px;">
            ‚ö†Ô∏è Gemini transcription requires an API key. Please save your API key above to enable this option.
          </p>

          <!-- Chirp Settings (Hidden by default) -->
          <div id="chirpSettings"
            style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
            <h3>Chirp 3 Configuration</h3>
            <p class="help-text" style="margin-bottom: 15px;">
              Requires a Google Cloud Project with Speech-to-Text API enabled and a V2 Recognizer resource.
            </p>

            <div class="form-group">
              <label for="chirpProjectId">Google Cloud Project ID</label>
              <input type="text" id="chirpProjectId" placeholder="e.g., my-project-123">
            </div>

            <div class="form-group">
              <label for="chirpRegion">Region</label>
              <select id="chirpRegion" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="global" selected>global</option>
                <option value="us">us (US Multi-region)</option>
                <option value="us-central1">us-central1 (Iowa)</option>
                <option value="europe-west4">europe-west4 (Netherlands)</option>
                <option value="asia-southeast1">asia-southeast1 (Singapore)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="chirpRecognizerId">Recognizer ID</label>
              <input type="text" id="chirpRecognizerId" placeholder="e.g., _ or my-recognizer" value="_">
              <p class="help-text">Use "_" for default configuration, or a specific Recognizer ID.</p>
            </div>

            <div class="form-group">
              <label>Authentication Method</label>
              <div class="radio-group" style="margin-bottom: 10px;">
                <label class="radio-option">
                  <input type="radio" name="chirpAuthMethod" value="apiKey" checked>
                  <div class="radio-content">API Key</div>
                </label>
                <label class="radio-option">
                  <input type="radio" name="chirpAuthMethod" value="serviceAccount">
                  <div class="radio-content">Service Account JSON</div>
                </label>
              </div>
            </div>

            <div id="chirpApiKeySection">
              <div class="form-group">
                <label for="chirpApiKey">Google Cloud API Key</label>
                <input type="password" id="chirpApiKey" placeholder="Leave empty to use Gemini API Key">
              </div>
            </div>

            <div id="chirpServiceAccountSection" style="display: none;">
              <div class="form-group">
                <label for="serviceAccountFile">Service Account JSON File</label>
                <input type="file" id="serviceAccountFile" accept=".json">
                <p class="help-text">Upload the JSON key file you downloaded from Google Cloud Console.</p>
              </div>
              <div id="serviceAccountStatus" style="margin-top: 5px; font-size: 0.9em;"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Privacy & Permissions</h2>
        <ul class="privacy-list">
          <li>üé§ <strong>Microphone:</strong> Required to capture your voice for transcription</li>
          <li>üîí <strong>Your API Key:</strong> Stored locally and never shared</li>
          <li>‚òÅÔ∏è <strong>Audio Data:</strong> Sent directly to Google's Gemini API for processing</li>
          <li>üìù <strong>No Data Storage:</strong> We don't store or log any of your audio or text</li>
        </ul>
      </section>
    </main>

    <footer>
      <p>Made with ‚ù§Ô∏è using Gemini AI</p>
    </footer>
  </div>

  <script src="gemini-client.js"></script>
  <script src="options.js"></script>
</body>

</html>